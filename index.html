<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üå∏ Nail Sakura Studio</title>
    <style>
        /* –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò - –£–ë–ò–†–ê–ï–ú –í–°–ï –ú–ï–®–ê–Æ–©–ï–ï –ö–õ–ò–ö–ê–ú */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: rgba(0,0,0,0);
            -webkit-touch-callout: none;
            user-select: none;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow-x: hidden;
            touch-action: manipulation;
        }
        
        body {
            font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
            background: linear-gradient(135deg, #FFE4E9 0%, #FFB6C1 100%);
            min-height: 100vh;
            color: #5D1F31;
            padding: 20px;
            padding-bottom: 100px;
        }
        
        /* –ö–û–ù–¢–ï–ô–ù–ï–† */
        .container {
            max-width: 500px;
            margin: 0 auto;
        }
        
        /* –®–ê–ü–ö–ê - –£–ü–†–û–©–ï–ù–ù–ê–Ø */
        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }
        
        .logo {
            font-size: 32px;
            color: #D81B60;
            margin-bottom: 10px;
        }
        
        /* –ü–†–û–°–¢–´–ï –ö–ù–û–ü–ö–ò –ö–û–¢–û–†–´–ï –¢–û–ß–ù–û –ë–£–î–£–¢ –†–ê–ë–û–¢–ê–¢–¨ */
        .action-btn {
            display: block;
            width: 100%;
            padding: 20px;
            margin: 10px 0;
            background: white;
            border: none;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            color: #5D1F31;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transition: all 0.2s;
        }
        
        .action-btn:active {
            transform: scale(0.98);
            background: #FFE4E9;
        }
        
        /* –≠–ö–†–ê–ù–´ */
        .screen {
            display: none;
        }
        
        .screen.active {
            display: block;
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* –£–ü–†–û–©–ï–ù–ù–ê–Ø –§–û–†–ú–ê */
        select, input {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid #FFB6C1;
            border-radius: 10px;
            font-size: 16px;
        }
        
        /* –ù–ò–ñ–ù–Ø–Ø –ü–ê–ù–ï–õ–¨ */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            display: flex;
            padding: 10px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }
        
        .nav-btn {
            flex: 1;
            padding: 10px;
            border: none;
            background: none;
            font-size: 12px;
            cursor: pointer;
        }
        
        /* –û–¢–õ–ê–î–û–ß–ù–´–ô –ë–õ–û–ö */
        .debug {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 5px;
            font-size: 10px;
            border-radius: 5px;
            z-index: 9999;
        }
    </style>
</head>
<body>
    <!-- –û–¢–õ–ê–î–û–ß–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø -->
    <div class="debug" id="debug">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    
    <div class="container">
        <!-- –®–ê–ü–ö–ê -->
        <div class="header">
            <div class="logo">üå∏ Nail Sakura</div>
            <button onclick="toggleTheme()" style="position:absolute;right:0;top:0;background:#FFB6C1;border:none;padding:10px;border-radius:50%;cursor:pointer">üåô</button>
        </div>
        
        <!-- –≠–ö–†–ê–ù 1: –ì–õ–ê–í–ù–ê–Ø -->
        <div id="mainScreen" class="screen active">
            <div style="text-align:center;margin:20px 0;">
                <div id="userAvatar" style="width:80px;height:80px;background:#FFB6C1;border-radius:50%;margin:0 auto 15px;font-size:40px;line-height:80px;">üëë</div>
                <h2 id="userName">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
            </div>
            
            <button class="action-btn" onclick="showScreen('booking')">üíÖ –ó–∞–ø–∏—Å–∞—Ç—å—Å—è</button>
            <button class="action-btn" onclick="showScreen('services')">‚ú® –£—Å–ª—É–≥–∏</button>
            <button class="action-btn" onclick="showScreen('myBookings')">üìÖ –ú–æ–∏ –∑–∞–ø–∏—Å–∏</button>
            <button class="action-btn" onclick="showScreen('profile')">üë§ –ü—Ä–æ—Ñ–∏–ª—å</button>
        </div>
        
        <!-- –≠–ö–†–ê–ù 2: –ó–ê–ü–ò–°–¨ -->
        <div id="bookingScreen" class="screen">
            <button onclick="showScreen('main')" style="background:none;border:none;font-size:24px;cursor:pointer">‚Üê</button>
            <h2>üìù –ó–∞–ø–∏—Å—å</h2>
            
            <select id="serviceSelect">
                <option>üíÖ –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –º–∞–Ω–∏–∫—é—Ä - 1500‚ÇΩ</option>
                <option>‚ú® –ü–æ–∫—Ä—ã—Ç–∏–µ –≥–µ–ª—å-–ª–∞–∫–æ–º - 2000‚ÇΩ</option>
                <option>üé® –î–∏–∑–∞–π–Ω –Ω–æ–≥—Ç–µ–π - 1000‚ÇΩ</option>
                <option>üíé SPA-—É—Ö–æ–¥ - 1800‚ÇΩ</option>
            </select>
            
            <input type="date" id="bookingDate">
            
            <select id="bookingTime">
                <option>10:00</option>
                <option>11:00</option>
                <option>12:00</option>
                <option>13:00</option>
                <option>14:00</option>
                <option>15:00</option>
                <option>16:00</option>
                <option>17:00</option>
                <option>18:00</option>
            </select>
            
            <button class="action-btn" onclick="submitBooking()" style="background:#FFB6C1;color:white">‚úÖ –ó–∞–ø–∏—Å–∞—Ç—å—Å—è</button>
        </div>
        
        <!-- –≠–ö–†–ê–ù 3: –£–°–õ–£–ì–ò -->
        <div id="servicesScreen" class="screen">
            <button onclick="showScreen('main')" style="background:none;border:none;font-size:24px;cursor:pointer">‚Üê</button>
            <h2>üíÖ –£—Å–ª—É–≥–∏</h2>
            
            <div style="background:#FFE4E9;padding:15px;margin:10px 0;border-radius:10px;cursor:pointer" onclick="selectService('manicure')">
                <h3>üíÖ –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –º–∞–Ω–∏–∫—é—Ä</h3>
                <p>–û–±—Ä–∞–±–æ—Ç–∫–∞ + –ø–æ–∫—Ä—ã—Ç–∏–µ</p>
                <strong>1500‚ÇΩ</strong>
            </div>
            
            <div style="background:#FFE4E9;padding:15px;margin:10px 0;border-radius:10px;cursor:pointer" onclick="selectService('gel')">
                <h3>‚ú® –ü–æ–∫—Ä—ã—Ç–∏–µ –≥–µ–ª—å-–ª–∞–∫–æ–º</h3>
                <p>–î–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ</p>
                <strong>2000‚ÇΩ</strong>
            </div>
            
            <div style="background:#FFE4E9;padding:15px;margin:10px 0;border-radius:10px;cursor:pointer" onclick="selectService('design')">
                <h3>üé® –î–∏–∑–∞–π–Ω –Ω–æ–≥—Ç–µ–π</h3>
                <p>–†–∏—Å—É–Ω–∫–∏, —Å—Ç—Ä–∞–∑—ã, –≥—Ä–∞–¥–∏–µ–Ω—Ç</p>
                <strong>1000‚ÇΩ</strong>
            </div>
        </div>
        
        <!-- –≠–ö–†–ê–ù 4: –ü–†–û–§–ò–õ–¨ -->
        <div id="profileScreen" class="screen">
            <button onclick="showScreen('main')" style="background:none;border:none;font-size:24px;cursor:pointer">‚Üê</button>
            <h2>üë§ –ü—Ä–æ—Ñ–∏–ª—å</h2>
            
            <div style="text-align:center;margin:20px 0;">
                <div id="profileAvatar" style="width:100px;height:100px;background:#FFB6C1;border-radius:50%;margin:0 auto 15px;font-size:48px;line-height:100px;">üëë</div>
                <h3 id="profileName">–ó–∞–≥—Ä—É–∑–∫–∞...</h3>
                <p id="profileInfo">Telegram ID: <span id="tgId">...</span></p>
            </div>
        </div>
    </div>
    
    <!-- –ù–ò–ñ–ù–Ø–Ø –ü–ê–ù–ï–õ–¨ -->
    <nav class="bottom-nav">
        <button class="nav-btn" onclick="showScreen('main')">üè† –ì–ª–∞–≤–Ω–∞—è</button>
        <button class="nav-btn" onclick="showScreen('booking')">üíÖ –ó–∞–ø–∏—Å—å</button>
        <button class="nav-btn" onclick="showScreen('services')">‚ú® –£—Å–ª—É–≥–∏</button>
        <button class="nav-btn" onclick="showScreen('profile')">üë§ –ü—Ä–æ—Ñ–∏–ª—å</button>
    </nav>

    <script>
        // ======================
        // –û–¢–õ–ê–î–û–ß–ù–´–ô –ö–û–î - –ü–û–ö–ê–ó–´–í–ê–ï–¢ –ß–¢–û –ü–†–û–ò–°–•–û–î–ò–¢
        // ======================
        function debugLog(message) {
            console.log('üîß ' + message);
            document.getElementById('debug').textContent = message;
        }
        
        // ======================
        // –ü–†–û–°–¢–ê–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø
        // ======================
        function showScreen(screenName) {
            debugLog('–ö–ª–∏–∫: ' + screenName);
            
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —ç–∫—Ä–∞–Ω—ã
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—ã–π
            const targetScreen = document.getElementById(screenName + 'Screen');
            if (targetScreen) {
                targetScreen.classList.add('active');
                debugLog('–ü–æ–∫–∞–∑–∞–Ω —ç–∫—Ä–∞–Ω: ' + screenName);
            } else {
                debugLog('–û–®–ò–ë–ö–ê: –≠–∫—Ä–∞–Ω ' + screenName + ' –Ω–µ –Ω–∞–π–¥–µ–Ω');
            }
        }
        
        function selectService(service) {
            debugLog('–í—ã–±—Ä–∞–Ω–∞ —É—Å–ª—É–≥–∞: ' + service);
            showScreen('booking');
        }
        
        function submitBooking() {
            const service = document.getElementById('serviceSelect').value;
            const date = document.getElementById('bookingDate').value;
            
            if (!date) {
                alert('–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É!');
                return;
            }
            
            alert('üéâ –ó–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–Ω–∞!\n' + service + '\n–î–∞—Ç–∞: ' + date);
            showScreen('main');
        }
        
        function toggleTheme() {
            document.body.style.background = document.body.style.background.includes('2A2A2A') 
                ? 'linear-gradient(135deg, #FFE4E9 0%, #FFB6C1 100%)' 
                : 'linear-gradient(135deg, #5D1F31 0%, #2A2A2A 100%)';
        }
        
        // ======================
        // TELEGRAM –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø - –ü–†–û–°–¢–ê–Ø
        // ======================
        function loadTelegramData() {
            debugLog('–ó–∞–≥—Ä—É–∑–∫–∞ Telegram –¥–∞–Ω–Ω—ã—Ö...');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ Telegram SDK
            if (window.Telegram && Telegram.WebApp) {
                const tg = Telegram.WebApp;
                debugLog('Telegram SDK –Ω–∞–π–¥–µ–Ω');
                
                // –ü—ã—Ç–∞–µ–º—Å—è —Ä–∞—Å–∫—Ä—ã—Ç—å –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
                try {
                    tg.expand();
                    debugLog('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞—Å–∫—Ä—ã—Ç–æ');
                } catch(e) {
                    debugLog('–û—à–∏–±–∫–∞ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è: ' + e.message);
                }
                
                // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                const user = tg.initDataUnsafe?.user;
                if (user) {
                    debugLog('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ' + user.first_name);
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–º—è
                    const nameElement = document.getElementById('userName');
                    const profileNameElement = document.getElementById('profileName');
                    if (nameElement && user.first_name) {
                        nameElement.textContent = '–ü—Ä–∏–≤–µ—Ç, ' + user.first_name + '!';
                    }
                    if (profileNameElement && user.first_name) {
                        profileNameElement.textContent = user.first_name;
                    }
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º Telegram ID
                    const tgIdElement = document.getElementById('tgId');
                    if (tgIdElement && user.id) {
                        tgIdElement.textContent = user.id;
                    }
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∞–≤–∞—Ç–∞—Ä –µ—Å–ª–∏ –µ—Å—Ç—å —Ñ–æ—Ç–æ
                    const avatarElements = document.querySelectorAll('[id*="Avatar"]');
                    if (user.photo_url) {
                        avatarElements.forEach(el => {
                            el.innerHTML = '<img src="' + user.photo_url + '" style="width:100%;height:100%;border-radius:50%">';
                        });
                    }
                    
                } else {
                    debugLog('–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –ø–æ–ª—É—á–µ–Ω—ã');
                    // –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
                    document.getElementById('userName').textContent = '–ü—Ä–∏–≤–µ—Ç, –ê–Ω—è!';
                    document.getElementById('profileName').textContent = '–ê–Ω—è –ò–≤–∞–Ω–æ–≤–∞';
                    document.getElementById('tgId').textContent = '123456789';
                }
            } else {
                debugLog('Telegram SDK –Ω–µ –Ω–∞–π–¥–µ–Ω - —Ä–µ–∂–∏–º –±—Ä–∞—É–∑–µ—Ä–∞');
                // –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
                document.getElementById('userName').textContent = '–ü—Ä–∏–≤–µ—Ç, –ê–Ω—è!';
                document.getElementById('profileName').textContent = '–ê–Ω—è –ò–≤–∞–Ω–æ–≤–∞';
                document.getElementById('tgId').textContent = '123456789';
            }
        }
        
        // ======================
        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
        // ======================
        document.addEventListener('DOMContentLoaded', function() {
            debugLog('–î–æ–∫—É–º–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–µ–Ω');
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–µ–≥–æ–¥–Ω—è—à–Ω—é—é –¥–∞—Ç—É
            const today = new Date().toISOString().split('T')[0];
            const dateInput = document.getElementById('bookingDate');
            if (dateInput) {
                dateInput.value = today;
                dateInput.min = today;
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ Telegram
            loadTelegramData();
            
            // –¢–µ—Å—Ç–∏—Ä—É–µ–º –∫–ª–∏–∫–∏
            document.addEventListener('click', function(e) {
                console.log('–ö–ª–∏–∫ –ø–æ:', e.target.tagName, e.target.className);
            });
            
            debugLog('–ì–æ—Ç–æ–≤–æ! –ö–ª–∏–∫–∞–π—Ç–µ –∫–Ω–æ–ø–∫–∏');
        });
        
        // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –¥–µ–ª–∞–µ–º –≤—Å–µ –∫–Ω–æ–ø–∫–∏ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º–∏
        document.addEventListener('touchstart', function(e) {
            console.log('–ö–∞—Å–∞–Ω–∏–µ:', e.target.tagName);
        }, { passive: true });
    </script>
</body>
</html>
